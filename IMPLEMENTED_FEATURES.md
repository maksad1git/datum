# ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò

**–î–∞—Ç–∞:** 2025-11-22
**–°—Ç–∞—Ç—É—Å:** –§–∞–∑–∞ 1 MVP - –ó–∞–≤–µ—Ä—à–µ–Ω–∞

---

## üéØ –ß–¢–û –ë–´–õ–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### 1. ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤ —Å Chart.js

**–§–∞–π–ª—ã:**
- `analytics/views.py` - –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `get_context_data()`, `get_filters()`, `calculate_metric()`, `calculate_chart()`
- `templates/analytics/dashboard_detail.html` - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üìä –ú–µ—Ç—Ä–∏–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö (–±–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞ —Å –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è)
- üìà –ì—Ä–∞—Ñ–∏–∫–∏ Chart.js (–ª–∏–Ω–µ–π–Ω—ã–µ, —Å—Ç–æ–ª–±—á–∞—Ç—ã–µ)
- üîç –§–∏–ª—å—Ç—Ä—ã –ø–æ –ø–µ—Ä–∏–æ–¥—É (—Å–µ–≥–æ–¥–Ω—è, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü, custom)
- üåç –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º –∏ –∫–∞–Ω–∞–ª–∞–º
- üîÑ –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
- üé® –¶–≤–µ—Ç–æ–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```json
{
  "widgets": [
    {
      "type": "metric",
      "title": "–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞",
      "coefficient_id": 1,
      "aggregation": "avg",
      "unit": "‚ÇΩ",
      "color": "primary"
    },
    {
      "type": "chart",
      "title": "–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ –¥–Ω—è–º",
      "coefficient_id": 1,
      "chart_type": "line",
      "group_by": "date",
      "color": "rgba(75, 192, 192, 0.8)"
    }
  ]
}
```

---

### 2. ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

**–§–∞–π–ª—ã:**
- `analytics/views.py` - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω `ReportDetailView.get_context_data()`
- `templates/analytics/report_detail.html` - –ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏/–≥—Ä–∞—Ñ–∏–∫–∞–º–∏

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üìä –ú–µ—Ç—Ä–∏–∫–∏ (—á–∏—Å–ª–∞ —Å –µ–¥–∏–Ω–∏—Ü–∞–º–∏)
- üìà –ì—Ä–∞—Ñ–∏–∫–∏ (–∏–∑ JSON)
- üìã –¢–∞–±–ª–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö
- üñ®Ô∏è –ö–Ω–æ–ø–∫–∞ –ø–µ—á–∞—Ç–∏
- üîç –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (JSON –≤ <details>)

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã result JSON:**
```json
{
  "total_visits": 234,
  "average_price": {
    "value": 4523.45,
    "unit": "‚ÇΩ"
  },
  "price_by_region": {
    "labels": ["–ú–æ—Å–∫–≤–∞", "–°–ü–±", "–ö–∞–∑–∞–Ω—å"],
    "values": [5000, 4200, 3800],
    "type": "bar"
  },
  "visits_list": [
    {"outlet": "–ú–∞–≥–∞–∑–∏–Ω 1", "date": "2025-01-15", "price": 5000},
    {"outlet": "–ú–∞–≥–∞–∑–∏–Ω 2", "date": "2025-01-16", "price": 4500}
  ]
}
```

---

### 3. ‚úÖ Progressive Web App (PWA)

**–§–∞–π–ª—ã:**
- `static/manifest.json` - –ú–∞–Ω–∏—Ñ–µ—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `static/service-worker.js` - Service Worker –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω
- `templates/offline.html` - –û—Ñ—Ñ–ª–∞–π–Ω —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `templates/base.html` - –ü–æ–¥–∫–ª—é—á–µ–Ω—ã PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
- `datum_project/urls.py` - –î–æ–±–∞–≤–ª–µ–Ω URL `/offline/`

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üì± –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PWA –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω (Android/iOS)
- üåê –û—Ñ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞ (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü)
- üíæ –ö—ç—à —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (Bootstrap, jQuery, Chart.js)
- üì∂ –ü–æ–∫–∞–∑ –æ—Ñ—Ñ–ª–∞–π–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–≤—è–∑–∏
- üîî –ë–∞–Ω–Ω–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA
- üé® Theme color –¥–ª—è mobile browsers

**–ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –≤ Chrome/Safari
2. –ü–æ—è–≤–∏—Ç—Å—è –±–∞–Ω–Ω–µ—Ä "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Datum"
3. –ù–∞–∂–∞—Ç—å "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"
4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ –¥–æ–º–∞—à–Ω–µ–º —ç–∫—Ä–∞–Ω–µ

**–ö—ç—à–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –û—Ñ—Ñ–ª–∞–π–Ω —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- Bootstrap CSS/JS
- jQuery
- Chart.js
- Bootstrap Icons

---

### 4. ‚úÖ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º

**–§–∞–π–ª—ã:**
- `static/js/autosave.js` - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `templates/visits/fill_visit.html` - –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üíæ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –≤ LocalStorage
- üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚è∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ –±–æ–ª—å—à–µ 24 —á–∞—Å–æ–≤)
- üóëÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- üìù –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ"

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```javascript
const autosave = new FormAutosave('form', {
    storageKey: 'visit_123_autosave',
    interval: 30000, // 30 —Å–µ–∫—É–Ω–¥
    excludeFields: ['csrfmiddlewaretoken']
});
```

---

### 5. ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ

**–§–∞–π–ª—ã:**
- `templates/visits/fill_visit.html` - –î–æ–±–∞–≤–ª–µ–Ω –∞—Ç—Ä–∏–±—É—Ç `multiple` –∏ –ø—Ä–µ–≤—å—é

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üì∏ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ç–æ –∑–∞ —Ä–∞–∑
- üëÅÔ∏è –ü—Ä–µ–≤—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ (grid layout)
- üóúÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ —Ñ–æ—Ç–æ (–¥–æ 1920px, JPEG quality 0.8)
- üìè –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–º–∞–∫—Å 10MB)
- üìä –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
- üì± –ù–∞—Ç–∏–≤–Ω–∞—è –∫–∞–º–µ—Ä–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö (`capture="environment"`)

**–°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 1920px
- –§–æ—Ä–º–∞—Ç: JPEG
- –ö–∞—á–µ—Å—Ç–≤–æ: 80%
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π resize —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–π

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- ‚ùå –î–∞—à–±–æ—Ä–¥—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ JSON
- ‚ùå –û—Ç—á–µ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ JSON
- ‚ùå –ù–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚ùå –û–¥–Ω–æ —Ñ–æ—Ç–æ –∑–∞ —Ä–∞–∑

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- ‚úÖ –î–∞—à–±–æ—Ä–¥—ã —Å –∂–∏–≤—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- ‚úÖ –û—Ç—á–µ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- ‚úÖ PWA —Å –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–æ–º
- ‚úÖ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ —Å –ø—Ä–µ–≤—å—é –∏ —Å–∂–∞—Ç–∏–µ–º

---

## üöÄ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### 1. –°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Üí –î–∞—à–±–æ—Ä–¥—ã**
2. –ù–∞–∂–∞—Ç—å "–°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥"
3. –í –ø–æ–ª–µ "Config (JSON)" –≤—Å—Ç–∞–≤–∏—Ç—å:

```json
{
  "widgets": [
    {
      "type": "metric",
      "title": "–í—Å–µ–≥–æ –≤–∏–∑–∏—Ç–æ–≤",
      "aggregation": "count",
      "color": "success"
    },
    {
      "type": "chart",
      "title": "–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ –¥–Ω—è–º",
      "coefficient_id": 1,
      "chart_type": "line",
      "group_by": "date",
      "color": "rgba(75, 192, 192, 0.8)"
    }
  ]
}
```

4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
5. –û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥ - —É–≤–∏–¥–∏—Ç–µ –∂–∏–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏!

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–∞—à–±–æ—Ä–¥–∞:
- –í—ã–±—Ä–∞—Ç—å –ø–µ—Ä–∏–æ–¥ (—Å–µ–≥–æ–¥–Ω—è, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü)
- –í—ã–±—Ä–∞—Ç—å —Ä–µ–≥–∏–æ–Ω
- –í—ã–±—Ä–∞—Ç—å –∫–∞–Ω–∞–ª
- –ù–∞–∂–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PWA

**–ù–∞ Android:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –≤ Chrome
2. –ü–æ—è–≤–∏—Ç—Å—è –±–∞–Ω–Ω–µ—Ä —Å–Ω–∏–∑—É
3. –ù–∞–∂–∞—Ç—å "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"

**–ù–∞ iOS:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –≤ Safari
2. –ù–∞–∂–∞—Ç—å "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" ‚Üí "–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π"

### 4. –†–∞–±–æ—Ç–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PWA (—Å–º. –≤—ã—à–µ)
2. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –í—ã–∫–ª—é—á–∏—Ç—å Wi-Fi/4G
4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∂–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—É
5. –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
6. –ú–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω—è—Ç—å —Ñ–æ—Ä–º—ã (—Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ)

### 5. –ó–∞–ø–æ–ª–Ω—è—Ç—å –≤–∏–∑–∏—Ç—ã —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **–í–∏–∑–∏—Ç—ã ‚Üí –ú–æ–∏ –≤–∏–∑–∏—Ç—ã**
2. –í—ã–±—Ä–∞—Ç—å –≤–∏–∑–∏—Ç
3. –ù–∞—á–∞—Ç—å –∑–∞–ø–æ–ª–Ω—è—Ç—å —Ñ–æ—Ä–º—É
4. –£–≤–∏–¥–∏—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ"
5. –ó–∞–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥–∫—É
6. –û—Ç–∫—Ä—ã—Ç—å —Å–Ω–æ–≤–∞ - –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

### 6. –ó–∞–≥—Ä—É–∂–∞—Ç—å –º–Ω–æ–≥–æ —Ñ–æ—Ç–æ

1. –í —Ñ–æ—Ä–º–µ –≤–∏–∑–∏—Ç–∞ –Ω–∞–π—Ç–∏ –ø–æ–ª–µ "–§–æ—Ç–æ"
2. –ù–∞–∂–∞—Ç—å "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã" –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ
3. –í—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ —Å—Ä–∞–∑—É
4. –£–≤–∏–¥–∏—Ç–µ –ø—Ä–µ–≤—å—é –≤—Å–µ—Ö —Ñ–æ—Ç–æ
5. –§–æ—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∂–∏–º–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **Chart.js 4.4.0** - –≥—Ä–∞—Ñ–∏–∫–∏
- **Service Worker API** - –æ—Ñ—Ñ–ª–∞–π–Ω
- **LocalStorage API** - –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- **Canvas API** - —Å–∂–∞—Ç–∏–µ —Ñ–æ—Ç–æ
- **FileReader API** - –ø—Ä–µ–≤—å—é —Ñ–æ—Ç–æ
- **Web App Manifest** - PWA
- **Django ORM** - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ Lazy loading –≥—Ä–∞—Ñ–∏–∫–æ–≤
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
- ‚úÖ –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã (prefetch_related, select_related)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ CSRF —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è JSON
- ‚úÖ HTTPS required –¥–ª—è PWA

---

### 6. ‚úÖ PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

**–§–∞–π–ª—ã:**
- `analytics/views.py` - –î–æ–±–∞–≤–ª–µ–Ω `ReportPDFView`
- `templates/analytics/report_pdf.html` - PDF —à–∞–±–ª–æ–Ω –æ—Ç—á–µ—Ç–∞
- `analytics/urls.py` - –î–æ–±–∞–≤–ª–µ–Ω URL `/reports/<id>/pdf/`
- `templates/analytics/report_detail.html` - –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å PDF"

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üìÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –∏–∑ HTML —à–∞–±–ª–æ–Ω–∞
- üñ®Ô∏è –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ (A4, –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª—ã, –Ω—É–º–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü)
- üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã –≤ PDF
- üíæ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏–º–µ–Ω–µ–º —Ñ–∞–π–ª–∞
- ‚ö†Ô∏è Graceful degradation (–µ—Å–ª–∏ WeasyPrint –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- WeasyPrint –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- GTK dependencies –¥–ª—è Windows (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ù–∞ Linux/Mac —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–∞ Windows —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ GTK –±–∏–±–ª–∏–æ—Ç–µ–∫. –ï—Å–ª–∏ –æ–Ω–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –∫–Ω–æ–ø–∫–∞ PDF –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

---

### 7. ‚úÖ –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª—ã:**
- `geo/models.py` - –î–æ–±–∞–≤–ª–µ–Ω—ã FootfallCounter, OutletInventory, Display, DisplayInventory
- `visits/models.py` - –î–æ–±–∞–≤–ª–µ–Ω–∞ Sale
- `geo/admin.py` - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
- `visits/admin.py` - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ Sale
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

**–ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏:**

1. **FootfallCounter** - –ü—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ç–æ—á–µ–∫
   - outlet, timestamp, count, counted_by
   - –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π

2. **OutletInventory** - –ù–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
   - outlet, product, quantity, updated_by
   - –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ç–æ—á–∫–∞—Ö

3. **Display** - –í–∏—Ç—Ä–∏–Ω—ã/–ü—Ä–∏–ª–∞–≤–∫–∏
   - outlet, name, display_type (–ø—Ä–∏–ª–∞–≤–æ–∫/–≤–∏—Ç—Ä–∏–Ω–∞/—Å—Ç–µ–Ω–¥/—Å—Ç–µ–ª–ª–∞–∂)
   - location, is_active

4. **DisplayInventory** - –¢–æ–≤–∞—Ä—ã –Ω–∞ –≤–∏—Ç—Ä–∏–Ω–∞—Ö
   - display, product, quantity, position
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

5. **Sale** - –ü—Ä–æ–¥–∞–∂–∏
   - outlet, product, quantity, price, total_amount
   - sale_date, recorded_by
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç total_amount

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ 21 –º–µ—Ç—Ä–∏–∫–∞ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–±—Ä–∞–Ω—ã –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

---

## üìã –ß–¢–û –î–ê–õ–¨–®–ï (Roadmap)

### 8. ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**–§–∞–π–ª—ã:**
- `templates/visits/fill_visit_mobile.html` - –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ñ–æ—Ä–º—ã –≤–∏–∑–∏—Ç–∞
- `visits/views.py` - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `is_mobile()` –∏ –≤—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üì± –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (User-Agent)
- üóÇÔ∏è –ê–∫–∫–æ—Ä–¥–µ–æ–Ω—ã –¥–ª—è —Å–µ–∫—Ü–∏–π —Ñ–æ—Ä–º—ã (—ç–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ)
- üìä –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìå Sticky footer —Å –∫–Ω–æ–ø–∫–∞–º–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- üéØ –ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
- üîÑ –°—á–µ—Ç—á–∏–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ–∫—Ü–∏–π (X/Y –ø–æ–ª–µ–π)

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
1. **–ê–∫–∫–æ—Ä–¥–µ–æ–Ω—ã** - —Å–µ–∫—Ü–∏–∏ —Ñ–æ—Ä–º—ã —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
   - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
   - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∏–∑–∏—Ç–µ

2. **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ–π —Ñ–æ—Ä–º—ã
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ
   - –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

3. **Sticky Footer** - –∫–Ω–æ–ø–∫–∏ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–Ω–æ–ø–∫–∞–º
   - –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–Ω–æ–ø–æ–∫

4. **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞** - —Ä–∞–∑–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è mobile –∏ desktop
   - Desktop: –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–∏–¥ —Å —Å–∞–π–¥–±–∞—Ä–æ–º
   - Mobile: –∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã + sticky footer

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

### 9. ‚úÖ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤

**–§–∞–π–ª—ã:**
- `templates/analytics/dashboard_detail.html` - –î–æ–±–∞–≤–ª–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üîÑ –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
- ‚èØÔ∏è –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∫–ª/–≤—ã–∫–ª –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- üïê –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- üé® –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ (–∑–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∫–æ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω–æ)

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –û—Ç–∫—Ä—ã—Ç—å –ª—é–±–æ–π –¥–∞—à–±–æ—Ä–¥
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ê–≤—Ç–æ: –í–´–ö–õ" —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
3. –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–µ—Ç –∑–µ–ª–µ–Ω–æ–π "–ê–≤—Ç–æ: –í–ö–õ"
4. –î–∞—à–±–æ—Ä–¥ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –î–∞—à–±–æ—Ä–¥—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

### 10. ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ –≤ Excel –∏ CSV

**–§–∞–π–ª—ã:**
- `analytics/views.py` - –î–æ–±–∞–≤–ª–µ–Ω—ã `ReportExcelView` –∏ `ReportCSVView`
- `analytics/urls.py` - URL routes –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
- `templates/analytics/report_detail.html` - Dropdown –º–µ–Ω—é —ç–∫—Å–ø–æ—Ä—Ç–∞

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üìä **Excel —ç–∫—Å–ø–æ—Ä—Ç (.xlsx)**
  - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
  - –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º –∏ —Ñ–æ–Ω–æ–º
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —à–∏—Ä–∏–Ω–∞ —Å—Ç–æ–ª–±—Ü–æ–≤
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ—Ç—Ä–∏–∫ –∏ —Ç–∞–±–ª–∏—Ü
  - –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è —è—á–µ–µ–∫

- üìÑ **CSV —ç–∫—Å–ø–æ—Ä—Ç**
  - UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∞ —Å BOM (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ Excel)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ—Ç—Ä–∏–∫ –∏ —Ç–∞–±–ª–∏—Ü
  - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Excel –∏ Google Sheets

- üîΩ **Dropdown –º–µ–Ω—é —ç–∫—Å–ø–æ—Ä—Ç–∞**
  - PDF —Ñ–æ—Ä–º–∞—Ç (–∫—Ä–∞—Å–Ω—ã–π –∑–Ω–∞—á–æ–∫)
  - Excel —Ñ–æ—Ä–º–∞—Ç (–∑–µ–ª–µ–Ω—ã–π –∑–Ω–∞—á–æ–∫)
  - CSV —Ñ–æ—Ä–º–∞—Ç (—Å–∏–Ω–∏–π –∑–Ω–∞—á–æ–∫)

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –û—Ç–∫—Ä—ã—Ç—å –ª—é–±–æ–π –æ—Ç—á–µ—Ç
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–≠–∫—Å–ø–æ—Ä—Ç" (–∑–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å dropdown)
3. –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç: PDF, Excel –∏–ª–∏ CSV
4. –§–∞–π–ª —Å–∫–∞—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –∏–º–µ–Ω–µ–º `report_<–∫–æ–¥>_<–¥–∞—Ç–∞>.xlsx`

**–ü—Ä–∏–º–µ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ Excel:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç—á–µ—Ç–∞ (–∂–∏—Ä–Ω—ã–π, 16pt)
- –û–ø–∏—Å–∞–Ω–∏–µ (–∫—É—Ä—Å–∏–≤, 11pt)
- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Å—Ç–∞—Ç—É—Å
- –°–µ–∫—Ü–∏—è "–ú–ï–¢–†–ò–ö–ò" —Å —Å–µ—Ä—ã–º —Ñ–æ–Ω–æ–º
- –¢–∞–±–ª–∏—Ü—ã —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ (–∂–∏—Ä–Ω—ã–π + —Å–µ—Ä—ã–π —Ñ–æ–Ω)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —à–∏—Ä–∏–Ω–∞ —Å—Ç–æ–ª–±—Ü–æ–≤ (max 50 —Å–∏–º–≤–æ–ª–æ–≤)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –î–ª—è Excel: –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `openpyxl` (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)
- –î–ª—è CSV: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å `csv` (Python)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ú–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç—ã –≤ Excel –∏ CSV –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

### 11. ‚úÖ Background Sync –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª—ã:**
- `visits/views.py:419-516` - API endpoint `sync_visit_api`
- `visits/urls.py:40` - URL route `/api/sync/`
- `static/service-worker.js:92-240` - Background Sync –ª–æ–≥–∏–∫–∞ —Å IndexedDB
- `static/js/background-sync.js` - BackgroundSyncManager –∫–ª–∞—Å—Å

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üíæ IndexedDB —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è pending –≤–∏–∑–∏—Ç–æ–≤
- üîÑ Background Sync API (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- üì° Sync API endpoint `/visits/api/sync/`
- üîî Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- üìä –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ pending –≤–∏–∑–∏—Ç–æ–≤
- ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏
- üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (–Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞)

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –≤–∏–∑–∏—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ IndexedDB
3. –ü–æ—è–≤–∏—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–í–∏–∑–∏—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω. –û—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç"
4. –ö–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è —Å–µ—Ç—å, Background Sync –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ
5. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–í–∏–∑–∏—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω"

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤:**
- ‚úÖ Chrome/Edge (–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Background Sync)
- ‚ö†Ô∏è Firefox/Safari (IndexedDB —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ—Ç Background Sync - –Ω—É–∂–Ω–∞ —Ä—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ù–∞–¥–µ–∂–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ

---

## üìã –ß–¢–û –î–ê–õ–¨–®–ï (Roadmap)

### –§–∞–∑–∞ 2:
1. ‚úÖ PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ (WeasyPrint) - –ì–û–¢–û–í–û
2. ‚úÖ –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (FootfallCounter, OutletInventory, etc) - –ì–û–¢–û–í–û
3. ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã, –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä) - –ì–û–¢–û–í–û

### –§–∞–∑–∞ 3 (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ - 60%):
1. ‚úÖ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤ - –ì–û–¢–û–í–û
2. ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel/CSV - –ì–û–¢–û–í–û
3. ‚úÖ Background Sync - –ì–û–¢–û–í–û
4. üü¢ WebSocket –¥–ª—è –∂–∏–≤—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
5. üü¢ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
6. üü° –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è (–æ—Ç–ª–æ–∂–µ–Ω–æ)

---

## üêõ –ò–ó–í–ï–°–¢–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

1. **Service Worker** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ HTTPS (–∏–ª–∏ localhost)
2. **PWA iOS** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –º–µ–Ω—é, –Ω–µ —á–µ—Ä–µ–∑ –±–∞–Ω–Ω–µ—Ä
3. **–°–∂–∞—Ç–∏–µ —Ñ–æ—Ç–æ** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å JPEG (PNG –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è)
4. **–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - —Ñ–∞–π–ª—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, —Ç–æ–ª—å–∫–æ –∏—Ö –∏–º–µ–Ω–∞

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω (F12 ‚Üí Application ‚Üí Service Workers)
3. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä Django

---

**–í–µ—Ä—Å–∏—è:** 2.2.0
**–î–∞—Ç–∞:** 2025-11-23
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
